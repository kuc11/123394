<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <style>
        .checkWrap{
            width:300px;
        }
        .listBox{
            padding-left:50px;
            display:flex;
            flex-direction:column;
        }
        #pass{
            width:180px;
        }
    </style>
    <script>
        $(function(){
            $("#allchk").on("click",function(){
                var isCheck = $(this).is(":checked"); //체크박스의 체크여부 확인 체크가 되있다면 true 안되어있다면 false
                if(isCheck){
                    $(".agree").prop("checked",true);
                }
                else
                    $(".agree").prop("checked",false);
            });

            // 클래스명이 agree인 체크박스에 하나씩 체크하거나 전체체크 된경우 하나이상 
            // 체크헤제 했을때 모두동의 체크박스의 체크를 해제
            $(".agree").on("click",function(){
                var chk_cnt= $(".agree:checked").length; //체크된 개수
                var all_cnt= $(".agree").length;    //전체 체크 개수
                if(chk_cnt==all_cnt)
                    $("#allchk").prop("checked",true);
                // else if(chk_cnt ==(all_cnt-1) && isCheck ){
                //     $("#allchk").prop("checked",false);
                //     isCheck=false;
                // }

                else
                    $("#allchk").prop("checked",false);
            });
            $("#pass").on("click",function(){
                var chk_cnt = $(".agree.checked").length;
                var all_cnt = $(".agree").length;
                if(chk_cnt != all_cnt){
                    alert("모두 체크하세요!")
                }
            });
        });
    </script>
</head>
<body>
    <form method="get" action="pass.html">
    <div class="checkWrap">
        <div class="allBox">
            <input type="checkbox" name="allchk" id="allchk">모두동의
        </div>
        <div class="listBox">
            <span><input type="checkbox" name="agr" class="agree" value="개인정보">개인정보활용</span>
            <span><input type="checkbox" name="agr" class="agree" value="정보제공">정보제공</span>
            <span><input type="checkbox" name="agr" class="agree" value="이벤트알림">이벤트알림</span>
            <span><input type="checkbox" name="agr" class="agree" value="보험가입">보험가입</span>
        </div>
    </div>
    <button type="button" id="pass"> 다음 진행</button>
    </form>
    <!--
        모두 동의 체크시 전체 체크 및 헤제
        체크 목록 중 하나라도 체크 해제 되면 모두동의 체크 헤제
        
        다음 진행 버튼 클릭시 모두 체크 안되어 있으면 모두 체크하세요 라고 멘트 띄우기
    -->
</body>
</html>